<!DOCTYPE html>
<html lang="en">
	<head>
		<title></title>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	</head>
	<body>
		<div class="root">
			<div class="central_ui">
				<div class="tabs_row">
					<div class="doc_bts">
						<button>Documents</button>
						<button>Authors</button>
						<button>Departments</button>
					</div>
					<div class="option_row">
						<select id="slct" onChange="setPaginationNum(this.value);">
							<option value="5" selected="selected">5</option>
							<option value="10">10</option>
							<option value="25">25</option>
						</select>
						<select id="slct">
							<option value="По автору">По автору</option>
							<option value="По отделу">По отделу</option>
							<option value="По документу">По документу</option>
						</select>
						<button id="sb"><i class="fa fa-sort"></i></button>
					</div>
				</div>
				<div class="pagination_block">
					<button class="pag_ctrl_b" type="text"><</button>
					<button class="pag_num_b" type="text">1</button>
					<button class="pag_num_b" type="text">2</button>
					<button class="pag_num_b" type="text">3</button>
					<button class="pag_ctrl_b" type="text">></button>
				</div>
				<table id="data__table">
					<tr class="header_tr">
						<th>Id</th>
						<th>Name</th>
						<th>Addr</th>
						<th class="crth">
							<input id="cb" class="crud_c" type="button" name="create" value="+">
						</th>
					</tr>
					<!--
					<tr class="row_tr">
						<th>abff-00ef-120a-338f</th>
						<th>Bob</th>
						<th>Zuzichsrase</th>
						<th class="crth">
							<input id="cb" class="crud_u" type="button" name="update" value="+">
							<input id="cb" class="crud_d" type="button" name="delete" value="-">
						</th>
					</tr>
					<tr class="row_tr">
						<th>1920-ff0a-1293-bb12</th>
						<th>Martin</th>
						<th>Moscow</th>
						<th class="crth">
							<input id="cb" class="crud_u" type="button" name="update" value="+">
							<input id="cb" class="crud_d" type="button" name="delete" value="-">
						</th>
					</tr>
					-->

				</table>
			</div>
			<div class="create_els">
				<input type="text" name="name" placeholder="Name">
				<input type="text" name="version" placeholder="Version">
				<input type="text" name="folder" placeholder="Folder">
				<input type="text" name="author" placeholder="Author">
				<button id="crb" type="text">Create</button>
			</div>
		</div>
		<script>
			let doc_objcts = [
				{"Id": "abcd-0111-ffaa-01a1", "Name": "Bob", "Addr": "Zuzichstrasse"},
				{"Id": "0000-1231-f0ab-01a1", "Name": "Mike", "Addr": "Kal-d"},
				{"Id": "0011-2fb0-aa01-ffff", "Name": "Leo", "Addr": "MSC_O"},
				{"Id": "0000-0000-0000-0000", "Name": "Mark", "Addr": "FTPS"},
				{"Id": "abcd-0111-ffaa-01a1", "Name": "Bob", "Addr": "Zuzichstrasse"},
				{"Id": "abcd-0111-ffaa-01a1", "Name": "Bob", "Addr": "Zuzichstrasse"},
				{"Id": "abcd-0111-ffaa-01a1", "Name": "Bob", "Addr": "Zuzichstrasse"},
				{"Id": "abcd-0111-ffaa-01a1", "Name": "Bob", "Addr": "Zuzichstrasse"},
				{"Id": "0000-1231-f0ab-01a1", "Name": "Mike", "Addr": "Kal-d"},
				{"Id": "0011-2fb0-aa01-ffff", "Name": "Leo", "Addr": "MSC_O"},
				{"Id": "0000-0000-0000-0000", "Name": "Mark", "Addr": "FTPS"},
				{"Id": "0000-1231-f0ab-01a1", "Name": "Mike", "Addr": "Kal-d"},
				{"Id": "0011-2fb0-aa01-ffff", "Name": "Leo", "Addr": "MSC_O"},
				{"Id": "0000-0000-0000-0000", "Name": "Mark", "Addr": "FTPS"},
				{"Id": "0000-1231-f0ab-01a1", "Name": "Mike", "Addr": "Kal-d"},
				{"Id": "0011-2fb0-aa01-ffff", "Name": "Leo", "Addr": "MSC_O"},
				{"Id": "0000-0000-0000-0000", "Name": "Mark", "Addr": "FTPS"},
				{"Id": "0000-1231-f0ab-01a1", "Name": "Mike", "Addr": "Kal-d"},
				{"Id": "0011-2fb0-aa01-ffff", "Name": "Leo", "Addr": "MSC_O"},
				{"Id": "0000-0000-0000-0000", "Name": "Mark", "Addr": "FTPS"},
				{"Id": "abcd-0111-ffaa-01a1", "Name": "Bob", "Addr": "Zuzichstrasse"},
				{"Id": "0000-1231-f0ab-01a1", "Name": "Mike", "Addr": "Kal-d"},
				{"Id": "0011-2fb0-aa01-ffff", "Name": "Leo", "Addr": "MSC_O"},
				{"Id": "0000-0000-0000-0000", "Name": "Mark", "Addr": "FTPS"},
				{"Id": "abcd-0111-ffaa-01a1", "Name": "Bob", "Addr": "Zuzichstrasse"},
				{"Id": "0000-1231-f0ab-01a1", "Name": "Mike", "Addr": "Kal-d"},
				{"Id": "0011-2fb0-aa01-ffff", "Name": "Leo", "Addr": "MSC_O"},
				{"Id": "0000-0000-0000-0000", "Name": "Mark", "Addr": "FTPS"},
			];

			let paginationPage = 0;
			let paginationNum = 5;

			function setPaginationNum(num) {
				paginationNum = num;
				resetTable(doc_objcts);
				createTable(doc_objcts);
				createPaginationRow(doc_objcts);
			}

			function setPaginationPage(pag_page) {
				paginationPage = pag_page;
				resetTable(doc_objcts);
				createTable(doc_objcts);
				createPaginationRow(doc_objcts);
			}

			function resetTable(list_of_objects) {
				table_el = document.getElementById("data__table");
				table_el.replaceChildren([]);
				tr_row = document.createElement("tr");
				tr_row.classList.add("header_tr");
				for (var key in list_of_objects[0]) {
					subth = document.createElement("th")
					subth.innerHTML = key;
					tr_row.appendChild(subth);
				}
				op_ui = document.createElement("th")
				op_ui.classList.add("crth")
				op_ui.innerHTML = '<input id="cb" class="crud_c" type="button" name="create" value="+">'
				tr_row.appendChild(op_ui);

				table_el.appendChild(tr_row);
			}

			function createPaginationRow(list_of_objects) {
				num_of_pages = Math.ceil(list_of_objects.length/paginationNum);
				console.log("fuck", list_of_objects.length, paginationNum, num_of_pages);
				console.log("pag", paginationPage, paginationNum);
				
				pag_row = document.getElementsByClassName("pagination_block")[0];
				last_button = document.getElementsByClassName("pag_ctrl_b")[1];

				pag_num_buttons = Array.from(document.getElementsByClassName("pag_num_b"));
				pag_num_buttons.forEach(b => {
					b.remove();
				})

				Array(num_of_pages).fill(0).map((_, i) => i+1).forEach((num) => {
					console.log(num);
					but = document.createElement("button");
					but.onclick = function() {setPaginationPage(num-1)};
					but.classList.add("pag_num_b")
					but.innerHTML = num;
					pag_row.appendChild(but);
					pag_row.insertBefore(but, last_button);
				})
			}

			function createTable(dict_list) {
				table_el = document.getElementById("data__table");
				console.log("createTable", Number(paginationPage), Number(paginationPage)+Number(paginationNum))
				const slice_from = Number(paginationPage)*Number(paginationNum);
				const slice_to = slice_from + Number(paginationNum);
				console.log("slice", slice_from, slice_to);
				dict_list.slice(slice_from, slice_to).forEach((o) => {
					tr_el = document.createElement("tr");
					tr_el.classList.add("row_tr");
					for (var key in o) {
						th_el = document.createElement("th")
						th_el.innerHTML = o[key];
						tr_el.appendChild(th_el);
					}
					ui_th = document.createElement("th");
					ui_th.classList.add("crth");
					ui_th.innerHTML = '<input id="cb" class="crud_u" type="button" name="update" value="+"><input id="cb" class="crud_d" type="button" name="delete" value="-">'
					tr_el.appendChild(ui_th)
					table_el.appendChild(tr_el)
				})
			}
			createTable(doc_objcts);
			createPaginationRow(doc_objcts);
		</script>
		<style>
			* {
				margin: 0 auto;
				font-family: Monospace;
			}

			table {
			  width: 100%;
			  border-collapse: separate;
			  border-spacing: 0;
			  overflow: hidden;
			}
			td, th {
			  border: 1px solid #dddddd;
			  text-align: left;
			  padding: 8px;
			}
			tr:first-child th:first-child {
			  border-top-left-radius: 5px;
			}
			tr:first-child th:last-child {
			  border-top-right-radius: 5px;
			}
			tr:last-child th:first-child {
			  border-bottom-left-radius: 5px;
			}
			tr:last-child th:last-child {
			  border-bottom-right-radius: 5px;
			}

			.header_tr {
				font-weight: bold;
			}

			#cb {
				outline: none;
				border: none;
				border-radius: 5px;
				color: white;
				width: 20px;
				font-weight: bold;
				margin-right: 5px;
			}
			.crud_c {
				background-color: #33aa44;
			}
			.crud_u {
				background-color: #3355ff;
			}
			.crud_d {
				background-color: #ff4444;
			}
			.crud_c:hover {
				background-color: #229933;
				cursor: pointer;
			}
			.crud_u:hover {
				background-color: #2244ee;
				cursor: pointer;
			}
			.crud_d:hover {
				background-color: #ee3333;
				cursor: pointer;
			}

			.root {
				margin-top: 50px;
				/*background-color: #99b900;*/
				width: 1200px;
			}
			.central_ui {
				width: 800px;
				/*background-color: #9a076c;*/
				float: left;
			}
			.create_els {
				margin-top: 30px;
				width: 300px;
				float: right;
				padding: 0 25px;
			}
			.create_els input {
				width: 100%;
				margin-bottom: 10px;
				outline: none;
			}
			#crb {
				width: 308px;
				padding: 0;
				margin: 0;
			}

			#slct {
				border: 1px solid #bbb;
				border-radius: 5px;
				height: 20px;
				background-color: white;
			}
			#slct:hover {
				background-color: #eee;
				cursor: pointer;
			}
			#sb {
				border: 1px solid #bbb;
				border-radius: 5px;
				height: 20px;
				background-color: white;
			}
			#sb:hover {
				background-color: #eee;
				cursor: pointer;
			}
			.crth {
				width: 50px;
			}

			.option_row {
				width: 201px;
				margin-right: 0;
			}
			.tabs_row {
				margin-bottom: 10px;
				display: flex;
				justify-content: space-between;
			}
			.tabs_row button {
				border: 1px solid #bbb;
				border-radius: 5px;
				height: 20px;
				background-color: white;
			}
			.doc_bts {
				margin-left: 0;
			}
			.doc_bts button:hover {
				background-color: #eee;
				cursor: pointer;
			}
			.pagination_block {
				padding: 5px 0 10px 0;
			}
			.pagination_block button {
				border: 1px solid #bbb;
				border-radius: 5px;
				height: 20px;
				background-color: white;
			}
			.pagination_block button:hover {
				background-color: #eee;
				cursor: pointer;
			}
		</style>
	</body>
</html>
